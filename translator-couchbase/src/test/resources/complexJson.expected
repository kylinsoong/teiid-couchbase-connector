SET NAMESPACE 'http://www.teiid.org/translator/couchbase/2017' AS teiid_couchbase;

CREATE FOREIGN TABLE attr_jsonArray (
	"_documentId" string OPTIONS (UPDATABLE FALSE),
	attr_jsonArray_idx integer OPTIONS (UPDATABLE FALSE),
	attr_jsonArray string OPTIONS (NAMEINSOURCE '`attr_jsonArray`[]'),
	attr_jsonArray_Name string OPTIONS (NAMEINSOURCE '`Name`'),
	attr_jsonArray_Dimension integer OPTIONS (NAMEINSOURCE '`Dimension`'),
	FOREIGN KEY("_documentId") REFERENCES test 
) OPTIONS (NAMEINSOURCE '`attr_jsonArray`[]', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'true');

CREATE FOREIGN TABLE attr_jsonObject_attr_jsonArray (
	"_documentId" string OPTIONS (UPDATABLE FALSE),
	attr_jsonObject_attr_jsonArray_idx integer OPTIONS (UPDATABLE FALSE),
	attr_jsonObject_attr_jsonArray string OPTIONS (NAMEINSOURCE '`attr_jsonObject`.`attr_jsonArray`[]'),
	attr_jsonObject_attr_jsonArray_Name string OPTIONS (NAMEINSOURCE '`Name`'),
	FOREIGN KEY("_documentId") REFERENCES test 
) OPTIONS (NAMEINSOURCE '`attr_jsonObject`.`attr_jsonArray`[]', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'true');

CREATE FOREIGN TABLE test (
	"_documentId" string OPTIONS (UPDATABLE FALSE),
	attr_jsonObject_Name string OPTIONS (NAMEINSOURCE '`attr_jsonObject`.`Name`'),
	Name string OPTIONS (NAMEINSOURCE '`Name`'),
	CONSTRAINT PK0 PRIMARY KEY("_documentId")
) OPTIONS (NAMEINSOURCE '`test`', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'false');