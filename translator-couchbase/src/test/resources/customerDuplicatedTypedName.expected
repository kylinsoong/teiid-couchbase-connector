SET NAMESPACE 'http://www.teiid.org/translator/couchbase/2017' AS teiid_couchbase;

CREATE FOREIGN TABLE Customer (
	documentID string OPTIONS (UPDATABLE FALSE),
	ID string OPTIONS (NAMEINSOURCE '`ID`'),
	type string OPTIONS (NAMEINSOURCE '`type`'),
	Name string OPTIONS (NAMEINSOURCE '`Name`'),
	CONSTRAINT PK0 PRIMARY KEY(documentID)
) OPTIONS (NAMEINSOURCE '`test`', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'false', "teiid_couchbase:NAMEDTYPEPAIR" '`type` = ''Customer''');

CREATE FOREIGN TABLE Customer_SavedAddresses (
	documentID string OPTIONS (UPDATABLE FALSE),
	Customer_SavedAddresses_idx integer OPTIONS (UPDATABLE FALSE),
	Customer_SavedAddresses string OPTIONS (NAMEINSOURCE '`test`.`SavedAddresses`[]'),
	FOREIGN KEY(documentID) REFERENCES Customer 
) OPTIONS (NAMEINSOURCE '`test`.`SavedAddresses`[]', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'true');

CREATE FOREIGN TABLE test2_Customer (
	documentID string OPTIONS (UPDATABLE FALSE),
	ID string OPTIONS (NAMEINSOURCE '`ID`'),
	type string OPTIONS (NAMEINSOURCE '`type`'),
	Name string OPTIONS (NAMEINSOURCE '`Name`'),
	CONSTRAINT PK0 PRIMARY KEY(documentID)
) OPTIONS (NAMEINSOURCE '`test2`', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'false', "teiid_couchbase:NAMEDTYPEPAIR" '`type` = ''test2_Customer''');

CREATE FOREIGN TABLE test2_Customer_SavedAddresses (
	documentID string OPTIONS (UPDATABLE FALSE),
	test2_Customer_SavedAddresses_idx integer OPTIONS (UPDATABLE FALSE),
	test2_Customer_SavedAddresses string OPTIONS (NAMEINSOURCE '`test2`.`SavedAddresses`[]'),
	FOREIGN KEY(documentID) REFERENCES test2_Customer 
) OPTIONS (NAMEINSOURCE '`test2`.`SavedAddresses`[]', UPDATABLE TRUE, "teiid_couchbase:ISARRAYTABLE" 'true');